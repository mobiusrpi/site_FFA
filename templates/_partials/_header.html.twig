<nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="https://www.ffa-aero.fr/">
      <img src="{{ asset('images/logo_ffa_T100.png') }}" alt="FFA" width="100" height="37">
    </a>

    <!-- Toggler only for small screens -->
    <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMobileDropdown"
      aria-controls="navbarMobileDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Desktop full navbar -->
    <div class="d-none d-md-flex justify-content-between  align-items-cente w-100 px-3" id="navbarMain">
      <div class="flex-grow-1"></div>   <!-- empty div -->   
      <ul class="navbar-nav mb-2 mb-lg-0 mx-auto">
        <li class="nav-item">
          <a class="nav-link {% if app.request.attributes.get('_route') == 'home' %}active{% endif %}"
             href="{{ path('home') }}">Accueil</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if app.request.attributes.get('_route') == 'competitions_list' %}active{% endif %}"
             href="{{ path('competitions_list') }}">Compétitions</a>
        </li>
        {% if is_granted('ROLE_MANAGER') %}
          <li class="nav-item">
            <a class="nav-link {% if app.request.attributes.get('_route') == 'user.list' %}active{% endif %}"
               href="{{ path('admin') }}">Admin</a>
          </li>
        {% endif %}
      </ul>

      <!-- Desktop user block -->
      <div class="flex-grow-1 d-flex justify-content-end">
        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
          <div class="dropdown">
            <a class="btn btn-outline-light dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Mon compte
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              {% if app.user.licenseFfa %}
                <li><a class="dropdown-item" href="{{ path('crews_registration_list') }}">Mes inscriptions</a></li>
              {% endif %}            
              <li><a class="dropdown-item" href="{{ path('edit_profil') }}">Profil</a></li>
              <li><a class="dropdown-item" href="{{ path('logout') }}">Déconnexion</a></li>
            </ul>
          </div>
        {% else %}
          <a class="btn btn-outline-light" href="{{ path('login') }}">Connexion</a>
        {% endif %}
      </div>
    </div>

    <!-- Mobile dropdown below toggler -->
<div class="collapse d-lg-none bg-dark shadow rounded"
     id="navbarMobileDropdown"
     style="position: absolute; top: 100%; right: 0; z-index: 1050; min-width: 220px;">
      <ul class="navbar-nav flex-column p-2">
        <li class="nav-item">
          <a class="nav-link text-white {% if app.request.attributes.get('_route') == 'home' %}active{% endif %}"
             href="{{ path('home') }}">Accueil</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white {% if app.request.attributes.get('_route') == 'competitions_list' %}active{% endif %}"
             href="{{ path('competitions_list') }}">Compétitions</a>
        </li>
        {% if is_granted('ROLE_MANAGER') %}
          <li class="nav-item">
            <a class="nav-link text-white {% if app.request.attributes.get('_route') == 'user.list' %}active{% endif %}"
               href="{{ path('admin') }}">Admin</a>
          </li>
        {% endif %}
        <li><hr class="dropdown-divider text-white"></li>
        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
          <li class="nav-item">
            <a class="nav-link text-white" href="{{ path('crews_registration_list') }}">Mes inscriptions</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="{{ path('edit_profil') }}">Profil</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="{{ path('logout') }}">Déconnexion</a>
          </li>
        {% else %}
          <li class="nav-item">
            <a class="nav-link text-white" href="{{ path('login') }}">Connexion</a>
          </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>
